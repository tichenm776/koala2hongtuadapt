# H5访客预约数据库表结构设计V1.0.1


---

修改记录：

| 版本号 | 修改人 |  修改日期  | 修改内容                           |
| :----: | :----: | :--------: | ---------------------------------- |
|  V1.0  | 雷振林 | 2021/05/23 | 创建                               |
| V1.0.1 | 雷振林 | 2021/06/03 | 新增：3 员工手机号码与考拉id对应表 |

---




## 1 访客记录表

**表名：** visitor

**字段**

| 字段名            |  类型  | 是否为空 | 默认值 | 主键 | 描述                                                         |
| ----------------- | :----: | :------: | :----: | :--: | ------------------------------------------------------------ |
| id                |  int   | not null |        |  是  | 数据库自增字段                                               |
| name              | string | Not null |        |      | 访客姓名                                                     |
| phone             | string | Not null |        |      | 访客手机号码                                                 |
| come_from         | string |          |        |      | 访客单位                                                     |
| purpose           |  int   |          |        |      | 来访目的id                                                   |
| purpose_name      | string |          |        |      | 来访目的描述                                                 |
| Interviewee       | string |          |        |      | 被访人                                                       |
| interviewee_phone | string |          |        |      | 被访人手机号码                                               |
| proposer          | string |          |        |      | 申请人的手机号码                                             |
| start_time        |  int   |          |        |      | 来访开始时间，时间戳                                         |
| end_time          |  int   |          |        |      | 来访开始时间，时间戳                                         |
| is_auth           |  int   |          |   0    |      | 授权标志： 0:未授权；1:已授权                                |
| remark            | string |          |        |      | 备注                                                         |
| group_ids         |  int   |          |        |      | 权限分组。 本项目为空                                        |
| group_name        | string |          |        |      | 权限分组描述。本项目为空                                     |
| department        | string |          |        |      | 部门。本项目为空                                             |
| subject_type      |  int   |          |   1    |      | 考拉系统对应的访客类型，固定为1                              |
| subject_id        |  int   |          |        |      | 考拉系统对应的访客id，初始为空，只有通过接口写入考拉里了才会返回有 |
| photo             | string |          |        |      | 考拉系统对应的访客照片url，只有通过现场访客机拍照录入考拉里了才会返回有 |
| photo_id          |  int   |          |        |      | 考拉系统对应的访客照片id，只有通过现场访客机拍照录入考拉里了才会返回有 |

**索引**

* phone
* interviewee_phone
* proposer





## 2 访客随行人员表

**表名：** retinue

**字段**

| 字段名     |  类型  | 是否为空 | 默认值 | 主键 | 描述                                                         |
| ---------- | :----: | :------: | :----: | :--: | ------------------------------------------------------------ |
| id         |  int   | not null |        |  是  | 数据库自增字段                                               |
| parent_id  |   id   | not null |        |      | 关联visitor表的id字段                                        |
| name       | string | Not null |        |      | 访客姓名                                                     |
| phone      | string | Not null |        |      | 访客手机号码                                                 |
| subject_id |  int   |          |        |      | 考拉系统对应的访客id，初始为空，只有通过接口写入考拉里了才会返回有 |
| photo      | string |          |        |      | 考拉系统对应的访客照片url，只有通过现场访客机拍照录入考拉里了才会返回有 |
| photo_id   |  int   |          |        |      | 考拉系统对应的访客照片id，只有通过现场访客机拍照录入考拉里了才会返回有 |

**索引**

* parent_id

  

## 3 员工手机号码与考拉id对应表

**表名：** employee

**字段**

| 字段名     |  类型  | 是否为空 | 默认值 | 主键 | 描述                 |
| ---------- | :----: | :------: | :----: | :--: | -------------------- |
| id         |  int   | not null |        |  是  | 数据库自增字段       |
| phone      | string | Not null |        |      | 访客手机号码         |
| subject_id |  int   |          |        |      | 考拉系统对应的员工id |

**索引**

* phone

  